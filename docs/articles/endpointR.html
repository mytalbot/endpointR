<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>endpointR • endpointR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="endpointR">
<meta property="og:description" content="endpointR">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">endpointR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/endpointR.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mytalbot/endpointR/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>endpointR</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/mytalbot/endpointR/blob/master/vignettes/endpointR.Rmd"><code>vignettes/endpointR.Rmd</code></a></small>
      <div class="hidden name"><code>endpointR.Rmd</code></div>

    </div>

    
    
<div id="about-endpointr" class="section level2">
<h2 class="hasAnchor">
<a href="#about-endpointr" class="anchor"></a>About endpointR</h2>
<p>In our paper <strong>Body weight course as a reliable marker for humane endpoint determination in rat models with intracranial tumor</strong> by Helgers and Talbot et al (2019) we describe an algorithm that is capable of detecting endpoints in different experimental data sets with a detection rate of 97 %. As the algorithm is largely based on the detection of variance deviation, its major drawback certainly lies within the number of false alarms. However, as a tool for the unexperienced researcher working with laboratory animals it is a valuable addition to their daily work. Empirical endpoint assessment requires not only a high level of training and expertise but it is in its nature biased by human conjecture.</p>
<p>The presented algorithm offers objective assistance in data evaluation while leaving the option for using more traditional ways of evaluation. Another finding was the high correlation of clinical scoring with the mean absolute deviation (MAD) of the body weight data. By constraining body weight variance space by MAD, almost similar results as with empirical clinical scoring were achieved.</p>
<p>The endpointR is therefore not only useful for monotoring body weight data, other variables for potential humane endpoint detection may be used as well.</p>
</div>
<div id="what-can-it-do---what-is-it-for" class="section level2">
<h2 class="hasAnchor">
<a href="#what-can-it-do---what-is-it-for" class="anchor"></a>What can it do - what is it for?</h2>
<p>The endpointR requires longitudinal data, e.g. a time series of body weight data. However, for the actual calculation the time information is irrelevant. Data should simply be ordered as a variable vector (c(100, 98, 97, 95, 90, 85, 81)). If no normalized data are provided, the endpointR can take care of this.</p>
<p>There should be no missing data in the provided vector. Also, the endpointR is based on the calculation of a moving average. It requires the definition of a window size for calculating the floating mean and standard deviation. This also means that data must have a certain length to provide meainingful insights. As a crude recommendation, data should be at least 2 to 3 times longer than the window size. For example, if a series of body weight data is 18 days long, the maximum window length should be 6.</p>
<div id="disclaimer" class="section level3">
<h3 class="hasAnchor">
<a href="#disclaimer" class="anchor"></a>Disclaimer</h3>
<p>As already mentioned, the endpointR was originally developed for body weight change analysis but it may also be useful for other variables However, it remains a secondary assessment tool. It is not meant to replace experience and reason. Scientists should therefore use it carefully in any decision making process. We do not accept any liabilities from using the endpointR.</p>
</div>
</div>
<div id="functions" class="section level2">
<h2 class="hasAnchor">
<a href="#functions" class="anchor"></a>Functions</h2>
<div id="ep_load" class="section level3">
<h3 class="hasAnchor">
<a href="#ep_load" class="anchor"></a>ep_load</h3>
<pre><code><a href="../reference/ep_load.html"># endpointR load function allows easy loading of data.
ep_load(file)</a></code></pre>
<p>For context, data should be prepared as a *.txt file in the following format. The table is organized in rows. Each separate animal is in a row and consecutive time points are listed column-wise. The first time entry (the time dimension does not matter as long as it remains equal in all observations, e.g. hours, days, weeks etc) is always the baseline body weight on which all other data will be normalized (indicated as time 0 below). After id, each animal should have some treatment information in case further context is needed. If more meta-information is required, a sample information file can always be prepared which should have the same index structure as the main data file. However, this is not used in the endpointR. <code>file</code> can contain the path and file name information that points to the data file, e.g. “file=C:/project/data/mydata.txt”.</p>
<table class="table">
<thead><tr class="header">
<th align="left">id</th>
<th align="left">treatment</th>
<th align="left">time 0</th>
<th align="left">time 1</th>
<th align="left">…</th>
<th align="left">time n</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">animal1</td>
<td align="left">Microinjection</td>
<td align="left">328</td>
<td align="left">324</td>
<td align="left">…</td>
<td align="left">308</td>
</tr>
<tr class="even">
<td align="left">animal2</td>
<td align="left">Microinjection</td>
<td align="left">397</td>
<td align="left">391</td>
<td align="left">…</td>
<td align="left">378</td>
</tr>
<tr class="odd">
<td align="left">animal3</td>
<td align="left">Control</td>
<td align="left">415</td>
<td align="left">412</td>
<td align="left">…</td>
<td align="left">410</td>
</tr>
<tr class="even">
<td align="left">…</td>
<td align="left">…</td>
<td align="left">…</td>
<td align="left">…</td>
<td align="left">…</td>
<td align="left">…</td>
</tr>
</tbody>
</table>
</div>
<div id="ep_select" class="section level3">
<h3 class="hasAnchor">
<a href="#ep_select" class="anchor"></a>ep_select</h3>
<pre><code><a href="../reference/ep_select.html"># endpointR load function allows easy loading of data.
ep_select(testdata, n = 1)</a></code></pre>
<p>The <code>ep_select</code> function can be used for data subsetting by animal index (n = 1 indicates the first animal in the loaded data). As input the output from <code>ep_load</code> can be used. The output from <code>ep_select</code> may then serve as input for the <code>td</code> field in the <code>epR</code> function.</p>
</div>
<div id="epr" class="section level3">
<h3 class="hasAnchor">
<a href="#epr" class="anchor"></a>epR</h3>
<pre><code><a href="../reference/epR.html"># Main endpointR function.
epR(td = td, org = FALSE, wl = 6, SDwdth = 2, mad = FALSE, ltype = "b", dotcolor = "black", uprcol = "darkgreen", lwrcol = "magenta", cex = 1, cex.axis = 1, cex.lab = 1, xlim = NULL, ylim = NULL, pch = 19, blind = FALSE, ignupr = FALSE, xlab = "time", ylab = "Moving average (%)", main = NULL)</a></code></pre>
<p>The <code>epR</code> function is the main endpointR body. It will calculate all relevant information for a humane endpoint assessment for the input data. <code>td</code> (test data) contains the variable vector of the test animal, <code>org</code> will determine whether to use original or floating mean data. The axes might need a range adaption if <code>org=TRUE</code>. <code>wl</code> determines the window length for the calculations and <code>SDwidth</code> the corridor width of the standard deviation around the moving average. <code>mad</code> controls whether to use mean absolute deviation constraint or not. The endpointR is also meant as an optical inspection tool. The flow of body weight can be monitored graphically. However, sometimes this is not useful, e.g. if multiple calculations are needed. With the <code>blind</code> object plots are not shown. With <code>ignupr</code> the upper corridor deviations can be ignored, e.g. if the researcher is only interested in decreasing variables after insult. The rest are the usual graphics parameters.</p>
</div>
</div>
<div id="working-example" class="section level2">
<h2 class="hasAnchor">
<a href="#working-example" class="anchor"></a>Working example</h2>
<p>This example uses the internal <code>gliodat</code> data set.</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">endpointR</span>)
<span class="no">a</span>      <span class="kw">&lt;-</span> <span class="fl">1</span>
<span class="no">td</span>     <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/ep_select.html">ep_select</a></span>(<span class="no">gliodat</span>, <span class="no">a</span>)
<span class="no">danger</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/epR.html">epR</a></span>(<span class="kw">td</span>        <span class="kw">=</span> <span class="no">td</span>,
              <span class="kw">org</span>       <span class="kw">=</span> <span class="fl">FALSE</span>,
              <span class="kw">wl</span>        <span class="kw">=</span> <span class="fl">6</span>,
              <span class="kw">SDwdth</span>    <span class="kw">=</span> <span class="fl">2</span>,
              <span class="kw">mad</span>       <span class="kw">=</span> <span class="fl">FALSE</span>,
              <span class="kw">cex</span>       <span class="kw">=</span> <span class="fl">1.4</span>,
              <span class="kw">cex.lab</span>   <span class="kw">=</span> <span class="fl">1.2</span>,
              <span class="kw">blind</span>     <span class="kw">=</span> <span class="fl">FALSE</span>,
              <span class="kw">ignupr</span>    <span class="kw">=</span> <span class="fl">FALSE</span>,
              <span class="kw">ylim</span>      <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">90</span>,<span class="fl">105</span>),
              <span class="kw">xlim</span>      <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>,<span class="fl">28</span>),
              <span class="kw">xlab</span>      <span class="kw">=</span> <span class="st">"day"</span>)</pre></body></html></div>
<p><img src="endpointR_files/figure-html/setup-1.png" width="700"></p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="no">danger</span>
<span class="co">#&gt;    n timepoint value where</span>
<span class="co">#&gt; 1 15        12 99.25 lower</span>
<span class="co">#&gt; 2 15        15 94.14 lower</span></pre></body></html></div>
<p>The output shows that the sample length has n=15 data points (not counting NAs). At timepoint (day) 12 there is a potential threat at a body weight change value of 99.25 %. However, this is probably a false alarm. The threshold violation on day 15 is certainly worse with a value of 94.15 %.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Steven Talbot.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
